<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
  <meta name="description" content="{{ page.description | default: site.description }}">

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">
  <link rel="stylesheet" href="{{ '/assets/css/docs.css' | relative_url }}">
</head>
<body>
  {% include header.html %}

  <div class="docs-container">
    <!-- Sidebar Navigation -->
    <nav class="docs-sidebar" id="docsSidebar">
      <div class="sidebar-content">
        <div class="sidebar-header">
          <h5>Documentation</h5>
        </div>

        <div class="nav-section">
          <h6 class="nav-section-title">Getting Started</h6>
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link" href="{{ '/docs/installation/' | relative_url }}" data-page="installation">
                <i class="bi bi-download"></i> Installation
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ '/docs/quick-start/' | relative_url }}" data-page="quick-start">
                <i class="bi bi-rocket"></i> Quick Start
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ '/docs/importing/' | relative_url }}" data-page="importing">
                <i class="bi bi-file-earmark-arrow-down"></i> Importing Collections
              </a>
            </li>
          </ul>
        </div>

        <div class="nav-section">
          <h6 class="nav-section-title">User Guide</h6>
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link" href="{{ '/docs/interface/' | relative_url }}" data-page="interface">
                <i class="bi bi-layout-sidebar"></i> Interface Overview
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ '/docs/running/' | relative_url }}" data-page="running">
                <i class="bi bi-play-circle"></i> Running Requests & Collections
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ '/docs/environments/' | relative_url }}" data-page="environments">
                <i class="bi bi-globe"></i> Environments
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ '/docs/data-driven/' | relative_url }}" data-page="data-driven">
                <i class="bi bi-table"></i> Data-Driven Testing
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ '/docs/curl-import/' | relative_url }}" data-page="curl-import">
                <i class="bi bi-code-slash"></i> cURL Import
              </a>
            </li>
          </ul>
        </div>

        <div class="nav-section">
          <h6 class="nav-section-title">Support</h6>
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/karatelabs/xplorer/issues" target="_blank">
                <i class="bi bi-github"></i> GitHub Issues
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://www.karatelabs.io" target="_blank">
                <i class="bi bi-box-arrow-up-right"></i> Karate Labs
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="docs-content">
      <div class="content-wrapper">
        {{ content }}
      </div>
    </main>
  </div>

  {% include footer.html %}

  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Theme toggle script -->
  <script>
    const themeToggle = document.getElementById('theme-toggle');
    const htmlElement = document.documentElement;
    const icon = themeToggle.querySelector('i');

    // Load saved theme or default to light
    const savedTheme = localStorage.getItem('theme') || 'light';
    htmlElement.setAttribute('data-bs-theme', savedTheme);
    updateIcon(savedTheme);

    themeToggle.addEventListener('click', () => {
      const currentTheme = htmlElement.getAttribute('data-bs-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      htmlElement.setAttribute('data-bs-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateIcon(newTheme);
    });

    function updateIcon(theme) {
      icon.className = theme === 'light' ? 'bi bi-moon-fill' : 'bi bi-sun-fill';
    }
  </script>

  <!-- Docs navigation script -->
  <script>
    // Highlight current page in sidebar
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll('.docs-sidebar .nav-link');

    navLinks.forEach(link => {
      const href = link.getAttribute('href');
      if (currentPath.includes(href) || currentPath.endsWith(href)) {
        link.classList.add('active');
      }
    });

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });
    });
  </script>
</body>
</html>
